openapi: 3.0.0
info:
  title: RAMSES
  version: dev
tags:
  - name: Auth
  - name: Orders
  - name: Importable Orders
  - name: Attachments
  - name: Composition Lines
  - name: Additional Purchase Lines
  - name: Order Material Items
paths:
  /login:
    post:
      tags:
        - Auth
      operationId: Auth_postLogin
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
                device_name:
                  type: string
              required:
                - email
                - password
                - device_name
  /logout:
    post:
      tags:
        - Auth
      operationId: Auth_postLogout
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogoutResponse'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /me:
    get:
      tags:
        - Auth
      operationId: Auth_getMe
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MeResponse'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/additional-purchase-lines/{id}:
    patch:
      tags:
        - Additional Purchase Lines
      operationId: AdditionalPurchaseLines_update
      parameters:
        - $ref: '#/components/parameters/AdditionalPurchaseLine.id'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdditionalPurchaseLine'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                order_no:
                  type: string
    delete:
      tags:
        - Additional Purchase Lines
      operationId: AdditionalPurchaseLines_delete
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/attachments/{id}:
    get:
      tags:
        - Attachments
      operationId: OrderAttachments_read
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderAttachment'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Attachments
      operationId: OrderAttachments_delete
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/composition-lines/{id}:
    patch:
      tags:
        - Composition Lines
      operationId: OrderCompositionLines_update
      parameters:
        - $ref: '#/components/parameters/OrderCompositionLine.id'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderCompositionLine'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                order_no:
                  type: string
  /order-manager/importable-orders:
    get:
      tags:
        - Importable Orders
      operationId: ImportableOrders_list
      parameters:
        - name: query
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/FilterRequest'
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: perPage
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: search
          in: query
          required: false
          schema:
            type: string
        - name: filters
          in: query
          required: false
          schema:
            type: array
            items: {}
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                  - links
                  - meta
                  - filters
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/SyncedOrder'
                  links:
                    $ref: '#/components/schemas/PaginationLinks'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
                  filters:
                    type: array
                    items:
                      $ref: '#/components/schemas/FilterOption'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/order-material-items/{id}:
    patch:
      tags:
        - Order Material Items
      operationId: OrderMaterialItems_update
      parameters:
        - $ref: '#/components/parameters/OrderMaterialItem.id'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderMaterialItem'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                order_no:
                  type: string
                material_no:
                  type: string
                item_no:
                  type: string
                qty_calculated:
                  type: integer
                  format: uint16
                user_qty:
                  type: integer
                  format: uint16
  /order-manager/orders:
    get:
      tags:
        - Orders
      operationId: Orders_list
      parameters:
        - name: query
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/FilterRequest'
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: perPage
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: search
          in: query
          required: false
          schema:
            type: string
        - name: filters
          in: query
          required: false
          schema:
            type: array
            items: {}
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                  - links
                  - meta
                  - filters
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Order'
                  links:
                    $ref: '#/components/schemas/PaginationLinks'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
                  filters:
                    type: array
                    items:
                      $ref: '#/components/schemas/FilterOption'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/orders/import:
    post:
      tags:
        - Orders
      operationId: Orders_postImport
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                order_id:
                  type: string
                delivery_date:
                  type: string
                  format: date-time
                prod_duration_in_days:
                  type: integer
                  format: uint8
                  minimum: 0
                  maximum: 50
              required:
                - order_id
  /order-manager/orders/{id}:
    get:
      tags:
        - Orders
      operationId: Orders_read
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    patch:
      tags:
        - Orders
      operationId: Orders_update
      parameters:
        - $ref: '#/components/parameters/Order.id'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                no:
                  type: string
                name:
                  type: string
                description:
                  type: string
                notes:
                  type: string
                status:
                  type: string
                client_no:
                  type: string
                client_name:
                  type: string
                client_address_line1:
                  type: string
                client_street:
                  type: string
                client_street_no:
                  type: string
                client_postal_code:
                  type: string
                client_city:
                  type: string
                client_country_code:
                  type: string
                owner:
                  type: string
                responsible:
                  type: string
                employee:
                  type: string
                drawing_no:
                  type: string
                location:
                  type: string
                prod_duration_days:
                  type: number
                prod_start_date:
                  type: string
                transport_date:
                  type: string
                delivery_date:
                  type: string
                creation_date:
                  type: string
                created_at:
                  type: string
                updated_at:
                  type: string
  /order-manager/orders/{id}/additional-purchase-lines:
    get:
      tags:
        - Orders
      operationId: Orders_getAdditionalPurchLines
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: query
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/FilterRequest'
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: perPage
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: search
          in: query
          required: false
          schema:
            type: string
        - name: filters
          in: query
          required: false
          schema:
            type: array
            items: {}
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                  - links
                  - meta
                  - filters
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdditionalPurchaseLine'
                  links:
                    $ref: '#/components/schemas/PaginationLinks'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
                  filters:
                    type: array
                    items:
                      $ref: '#/components/schemas/FilterOption'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Orders
      operationId: Orders_postAdditionalPurchLines
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/orders/{id}/attachments:
    get:
      tags:
        - Orders
      operationId: Orders_getAttachments
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: query
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/FilterRequest'
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: perPage
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: search
          in: query
          required: false
          schema:
            type: string
        - name: filters
          in: query
          required: false
          schema:
            type: array
            items: {}
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                  - links
                  - meta
                  - filters
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OrderAttachment'
                  links:
                    $ref: '#/components/schemas/PaginationLinks'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
                  filters:
                    type: array
                    items:
                      $ref: '#/components/schemas/FilterOption'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Orders
      operationId: Orders_postAttachments
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/orders/{id}/composition-lines:
    get:
      tags:
        - Orders
      operationId: Orders_getCompositionLines
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: query
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/FilterRequest'
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: perPage
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: search
          in: query
          required: false
          schema:
            type: string
        - name: filters
          in: query
          required: false
          schema:
            type: array
            items: {}
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                  - links
                  - meta
                  - filters
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OrderCompositionLine'
                  links:
                    $ref: '#/components/schemas/PaginationLinks'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
                  filters:
                    type: array
                    items:
                      $ref: '#/components/schemas/FilterOption'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/orders/{id}/order-materials:
    get:
      tags:
        - Orders
      operationId: Orders_getOrderMaterials
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: query
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/FilterRequest'
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: perPage
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: search
          in: query
          required: false
          schema:
            type: string
        - name: filters
          in: query
          required: false
          schema:
            type: array
            items: {}
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                  - links
                  - meta
                  - filters
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OrderMaterial'
                  links:
                    $ref: '#/components/schemas/PaginationLinks'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
                  filters:
                    type: array
                    items:
                      $ref: '#/components/schemas/FilterOption'
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /order-manager/orders/{id}/push-to-erp:
    post:
      tags:
        - Orders
      operationId: Orders_postToErp
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  parameters:
    AdditionalPurchaseLine.id:
      name: id
      in: path
      required: true
      schema:
        type: integer
        format: uint64
    Order.id:
      name: id
      in: path
      required: true
      schema:
        type: integer
        format: int64
    OrderCompositionLine.id:
      name: id
      in: path
      required: true
      schema:
        type: integer
        format: uint64
    OrderMaterialItem.id:
      name: id
      in: path
      required: true
      schema:
        type: string
  schemas:
    AdditionalPurchaseLine:
      type: object
      required:
        - id
        - order_no
      properties:
        id:
          type: integer
          format: uint64
        order_no:
          type: string
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
    FilterOption:
      type: object
      required:
        - name
        - type
      properties:
        name:
          type: string
        type:
          type: string
          enum:
            - checkbox
            - daterange
        options:
          type: array
          items:
            type: string
          nullable: true
    FilterRequest:
      type: object
    LoginResponse:
      type: object
      required:
        - token
      properties:
        token:
          type: string
    LogoutResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
    MeResponse:
      type: object
      required:
        - name
        - email
      properties:
        name:
          type: string
        email:
          type: string
    Order:
      type: object
      required:
        - id
        - no
        - name
        - description
        - notes
        - status
        - client_no
        - client_name
        - client_address_line1
        - client_street
        - client_street_no
        - client_postal_code
        - client_city
        - client_country_code
        - owner
        - responsible
        - employee
        - drawing_no
        - location
        - prod_duration_days
        - prod_start_date
        - transport_date
        - delivery_date
        - creation_date
        - created_at
        - updated_at
      properties:
        id:
          type: integer
          format: int64
        no:
          type: string
        name:
          type: string
        description:
          type: string
        notes:
          type: string
        status:
          type: string
        client_no:
          type: string
        client_name:
          type: string
        client_address_line1:
          type: string
        client_street:
          type: string
        client_street_no:
          type: string
        client_postal_code:
          type: string
        client_city:
          type: string
        client_country_code:
          type: string
        owner:
          type: string
        responsible:
          type: string
        employee:
          type: string
        drawing_no:
          type: string
        location:
          type: string
        prod_duration_days:
          type: number
        prod_start_date:
          type: string
        transport_date:
          type: string
        delivery_date:
          type: string
        creation_date:
          type: string
        created_at:
          type: string
        updated_at:
          type: string
    OrderAttachment:
      type: object
      required:
        - id
        - order_no
        - type
        - path
      properties:
        id:
          type: string
        order_no:
          type: string
        type:
          type: string
        path:
          type: string
    OrderCompositionLine:
      type: object
      required:
        - id
        - order_no
      properties:
        id:
          type: integer
          format: uint64
        order_no:
          type: string
    OrderMaterial:
      type: object
      required:
        - id
        - order_no
        - material_no
        - material_name
        - brutto_qty_m2
        - netto_qty_m2
        - orderMaterialItems
      properties:
        id:
          type: string
        order_no:
          type: string
        material_no:
          type: string
        material_name:
          type: string
        brutto_qty_m2:
          type: number
          format: float
        netto_qty_m2:
          type: number
          format: float
        orderMaterialItems:
          type: array
          items:
            $ref: '#/components/schemas/OrderMaterialItem'
    OrderMaterialItem:
      type: object
      required:
        - id
        - order_no
        - material_no
        - item_no
        - qty_calculated
        - user_qty
      properties:
        id:
          type: string
        order_no:
          type: string
        material_no:
          type: string
        item_no:
          type: string
        qty_calculated:
          type: integer
          format: uint16
        user_qty:
          type: integer
          format: uint16
    PaginationLinks:
      type: object
      properties:
        first:
          type: string
        last:
          type: string
        prev:
          type: string
        next:
          type: string
    PaginationMeta:
      type: object
      required:
        - current_page
        - last_page
        - path
        - per_page
        - total
      properties:
        current_page:
          type: integer
          format: int32
        from:
          type: integer
          format: int32
        last_page:
          type: integer
          format: int32
        path:
          type: string
        per_page:
          type: integer
          format: int32
        to:
          type: integer
          format: int32
        total:
          type: integer
          format: int32
    SyncedOrder:
      type: object
      required:
        - id
        - name
        - client_no
        - client_name
        - project_manager
      properties:
        id:
          type: string
        name:
          type: string
        client_no:
          type: string
        client_name:
          type: string
        project_manager:
          type: string
    Versions:
      type: string
      enum:
        - v1
        - dev
